<!DOCTYPE html><html lang="en"><head><meta http-equiv="Content-Security-Policy" content="default-src 'self' 'unsafe-inline' 'unsafe-eval' data: blob: https://cdnjs.cloudflare.com https://cdn.jsdelivr.net https://code.jquery.com https://unpkg.com https://d3js.org https://threejs.org https://cdn.plot.ly https://stackpath.bootstrapcdn.com https://maps.googleapis.com https://cdn.tailwindcss.com https://ajax.googleapis.com https://kit.fontawesome.com https://cdn.datatables.net https://maxcdn.bootstrapcdn.com https://code.highcharts.com https://tako-static-assets-production.s3.amazonaws.com https://www.youtube.com https://fonts.googleapis.com https://fonts.gstatic.com https://pfst.cf2.poecdn.net https://puc.poecdn.net https://i.imgur.com https://wikimedia.org https://*.icons8.com https://*.giphy.com https://picsum.photos https://images.unsplash.com; frame-src 'self' https://www.youtube.com https://trytako.com; child-src 'self'; manifest-src 'self'; worker-src 'self'; upgrade-insecure-requests; block-all-mixed-content;">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Game Hub</title>
    <script src="../Hidden/Script/cdn.tailwindcss.com.js"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'nintendo-red': '#E60012',
                        'nintendo-blue': '#0066CC',
                        'switch-gray': '#32334A',
                        'joy-orange': '#FF6B35',
                        'joy-purple': '#B537F2'
                    },
                    fontFamily: {
                        'game': ['Comic Sans MS', 'cursive', 'sans-serif']
                    }
                }
            }
        }
    </script>
    <style>
        .game-button {
            transition: all 0.2s ease;
            transform-style: preserve-3d;
        }
        .game-button:active {
            transform: translateY(2px) scale(0.98);
        }
        .bouncy {
            animation: bounce 2s infinite;
        }
        @keyframes bounce {
            0%, 20%, 50%, 80%, 100% { transform: translateY(0); }
            40% { transform: translateY(-10px); }
            60% { transform: translateY(-5px); }
        }
        .float {
            animation: float 3s ease-in-out infinite;
        }
        @keyframes float {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-10px); }
        }
        .rainbow-text {
            background: linear-gradient(45deg, #ff6b35, #f7931e, #ffd700, #90ee90, #87ceeb, #da70d6);
            background-size: 300% 300%;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            animation: rainbow 3s ease-in-out infinite;
        }
        @keyframes rainbow {
            0%, 100% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
        }
    </style>
</head>
<body class="min-h-screen bg-gradient-to-br from-blue-400 via-purple-500 to-pink-500 font-game">
    <!-- Dark mode support -->
    <script>
        if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {
            document.documentElement.classList.add('dark');
        }
        window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', event => {
            if (event.matches) {
                document.documentElement.classList.add('dark');
            } else {
                document.documentElement.classList.remove('dark');
            }
        });
    </script>

    <!-- Main Game Container -->
    <div class="min-h-screen flex flex-col">
        <!-- Header -->
        <header class="bg-white/90 dark:bg-gray-800/90 backdrop-blur shadow-lg p-4">
            <div class="max-w-6xl mx-auto flex items-center justify-between">
                <h1 class="text-3xl md:text-4xl font-bold rainbow-text">üéÆ Game Hub</h1>
                <div class="flex items-center gap-4">
                    <div class="text-sm md:text-base font-semibold bg-nintendo-red text-white px-3 py-1 rounded-full">
                        Score: <span id="totalScore">0</span>
                    </div>
                    <button id="homeBtn" class="bg-switch-gray hover:bg-gray-600 text-white px-4 py-2 rounded-lg transition-colors">
                        üè† Home
                    </button>
                </div>
            </div>
        </header>

        <!-- Main Content -->
        <main class="flex-1 p-4">
            <!-- Home Screen -->
            <div id="homeScreen" class="max-w-4xl mx-auto">
                <div class="text-center mb-8">
                    <h2 class="text-4xl md:text-6xl font-bold text-white mb-4 float">Welcome to Game Hub!</h2>
                    <p class="text-xl text-white/90 mb-6">Choose your mini-game adventure!</p>
                </div>

                <!-- Game Selection Grid -->
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                    <!-- Reaction Game -->
                    <div class="game-button bg-gradient-to-br from-red-400 to-red-600 p-6 rounded-2xl shadow-xl cursor-pointer hover:shadow-2xl" onclick="startGame('reaction')">
                        <div class="text-center">
                            <div class="text-6xl mb-4">‚ö°</div>
                            <h3 class="text-2xl font-bold text-white mb-2">Lightning Reflexes</h3>
                            <p class="text-white/80">Test your reaction time!</p>
                        </div>
                    </div>

                    <!-- Memory Game -->
                    <div class="game-button bg-gradient-to-br from-blue-400 to-blue-600 p-6 rounded-2xl shadow-xl cursor-pointer hover:shadow-2xl" onclick="startGame('memory')">
                        <div class="text-center">
                            <div class="text-6xl mb-4">üß†</div>
                            <h3 class="text-2xl font-bold text-white mb-2">Memory Master</h3>
                            <p class="text-white/80">Remember the sequence!</p>
                        </div>
                    </div>

                    <!-- Tap Challenge -->
                    <div class="game-button bg-gradient-to-br from-green-400 to-green-600 p-6 rounded-2xl shadow-xl cursor-pointer hover:shadow-2xl" onclick="startGame('tap')">
                        <div class="text-center">
                            <div class="text-6xl mb-4">üëÜ</div>
                            <h3 class="text-2xl font-bold text-white mb-2">Tap Frenzy</h3>
                            <p class="text-white/80">Tap as fast as you can!</p>
                        </div>
                    </div>

                    <!-- Color Match -->
                    <div class="game-button bg-gradient-to-br from-yellow-400 to-orange-600 p-6 rounded-2xl shadow-xl cursor-pointer hover:shadow-2xl" onclick="startGame('color')">
                        <div class="text-center">
                            <div class="text-6xl mb-4">üåà</div>
                            <h3 class="text-2xl font-bold text-white mb-2">Color Rush</h3>
                            <p class="text-white/80">Match the colors quickly!</p>
                        </div>
                    </div>

                    <!-- Pattern Game -->
                    <div class="game-button bg-gradient-to-br from-purple-400 to-purple-600 p-6 rounded-2xl shadow-xl cursor-pointer hover:shadow-2xl" onclick="startGame('pattern')">
                        <div class="text-center">
                            <div class="text-6xl mb-4">üîÑ</div>
                            <h3 class="text-2xl font-bold text-white mb-2">Pattern Panic</h3>
                            <p class="text-white/80">Follow the pattern!</p>
                        </div>
                    </div>

                    <!-- Balance Game -->
                    <div class="game-button bg-gradient-to-br from-pink-400 to-pink-600 p-6 rounded-2xl shadow-xl cursor-pointer hover:shadow-2xl" onclick="startGame('balance')">
                        <div class="text-center">
                            <div class="text-6xl mb-4">‚öñÔ∏è</div>
                            <h3 class="text-2xl font-bold text-white mb-2">Perfect Balance</h3>
                            <p class="text-white/80">Keep it steady!</p>
                        </div>
                    </div>

                    <!-- Whack-a-Mole Game -->
                    <div class="game-button bg-gradient-to-br from-amber-400 to-amber-600 p-6 rounded-2xl shadow-xl cursor-pointer hover:shadow-2xl" onclick="startGame('whack')">
                        <div class="text-center">
                            <div class="text-6xl mb-4">üî®</div>
                            <h3 class="text-2xl font-bold text-white mb-2">Whack-a-Mole</h3>
                            <p class="text-white/80">Whack the moles fast!</p>
                        </div>
                    </div>

                    <!-- Parkour Game -->
                    <div class="game-button bg-gradient-to-br from-cyan-400 to-cyan-600 p-6 rounded-2xl shadow-xl cursor-pointer hover:shadow-2xl" onclick="startGame('parkour')">
                        <div class="text-center">
                            <div class="text-6xl mb-4">üèÉ</div>
                            <h3 class="text-2xl font-bold text-white mb-2">Parkour Jump</h3>
                            <p class="text-white/80">Jump over obstacles!</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Game Screen -->
            <div id="gameScreen" class="hidden max-w-4xl mx-auto">
                <div class="bg-white/95 dark:bg-gray-800/95 backdrop-blur rounded-2xl shadow-2xl p-6 md:p-8">
                    <div class="text-center mb-6">
                        <h2 id="gameTitle" class="text-3xl md:text-4xl font-bold text-gray-800 dark:text-white mb-2"></h2>
                        <p id="gameInstructions" class="text-lg text-gray-600 dark:text-gray-300 mb-4"></p>
                        <div class="flex justify-center gap-6 text-lg font-semibold">
                            <div class="bg-blue-500 text-white px-4 py-2 rounded-lg">
                                Score: <span id="gameScore">0</span>
                            </div>
                            <div class="bg-green-500 text-white px-4 py-2 rounded-lg">
                                Time: <span id="gameTime">30</span>s
                            </div>
                        </div>
                    </div>

                    <!-- Game Content Area -->
                    <div id="gameContent" class="min-h-96 flex items-center justify-center">
                        <!-- Dynamic game content will be inserted here -->
                    </div>

                    <!-- Game Controls -->
                    <div id="gameControls" class="mt-6 text-center">
                        <button id="startGameBtn" class="bg-green-500 hover:bg-green-600 text-white text-xl font-bold py-4 px-8 rounded-2xl transition-colors">
                            Start Game!
                        </button>
                    </div>
                </div>
            </div>
        </main>

        <!-- Footer -->
        <footer class="bg-black/20 backdrop-blur text-white text-center p-4">
            <p class="text-sm">üéÆ Game Hub - Enjoy Various Mini-Games by Nut üéÆ</p>
        </footer>
    </div>

    <script>
        // Game State
        let currentGame = null;
        let gameScore = 0;
        let totalScore = parseInt(localStorage.getItem('partyScore') || '0');
        let gameTimer = null;
        let gameTime = 30;

        // Update total score display
        document.getElementById('totalScore').textContent = totalScore;

        // Navigation
        document.getElementById('homeBtn').addEventListener('click', showHome);

        function showHome() {
            document.getElementById('homeScreen').classList.remove('hidden');
            document.getElementById('gameScreen').classList.add('hidden');
            if (gameTimer) {
                clearInterval(gameTimer);
                gameTimer = null;
            }
        }

        function startGame(gameType) {
            currentGame = gameType;
            gameScore = 0;
            gameTime = 30;
            
            document.getElementById('homeScreen').classList.add('hidden');
            document.getElementById('gameScreen').classList.remove('hidden');
            
            // Setup game based on type
            setupGame(gameType);
        }

        function setupGame(gameType) {
            const gameContent = document.getElementById('gameContent');
            const gameTitle = document.getElementById('gameTitle');
            const gameInstructions = document.getElementById('gameInstructions');
            const startBtn = document.getElementById('startGameBtn');
            
            // Reset and show the start button
            startBtn.style.display = 'inline-block';
            startBtn.textContent = 'Start Game!';
            
            gameContent.innerHTML = '';
            
            switch(gameType) {
                case 'reaction':
                    gameTitle.textContent = '‚ö° Lightning Reflexes';
                    gameInstructions.textContent = 'Click/tap when the screen turns green!';
                    setupReactionGame();
                    break;
                case 'memory':
                    gameTitle.textContent = 'üß† Memory Master';
                    gameInstructions.textContent = 'Remember and repeat the sequence!';
                    setupMemoryGame();
                    break;
                case 'tap':
                    gameTitle.textContent = 'üëÜ Tap Frenzy';
                    gameInstructions.textContent = 'Tap the button as many times as possible!';
                    setupTapGame();
                    break;
                case 'color':
                    gameTitle.textContent = 'üåà Color Rush';
                    gameInstructions.textContent = 'Click the color that matches the text!';
                    setupColorGame();
                    break;
                case 'pattern':
                    gameTitle.textContent = 'üîÑ Pattern Panic';
                    gameInstructions.textContent = 'Repeat the button sequence!';
                    setupPatternGame();
                    break;
                case 'balance':
                    gameTitle.textContent = '‚öñÔ∏è Perfect Balance';
                    gameInstructions.textContent = 'Keep the bar in the center!';
                    setupBalanceGame();
                    break;
                case 'whack':
                    gameTitle.textContent = 'üî® Whack-a-Mole';
                    gameInstructions.textContent = 'Hit the moles as fast as you can!';
                    setupWhackGame();
                    break;
                case 'parkour':
                    gameTitle.textContent = 'üèÉ Parkour Jump';
                    gameInstructions.textContent = 'Jump over obstacles to survive!';
                    setupParkourGame();
                    break;
            }
            
            startBtn.onclick = () => startGameTimer();
        }

        function startGameTimer() {
            document.getElementById('startGameBtn').style.display = 'none';
            updateScore();
            updateTimer();
            
            gameTimer = setInterval(() => {
                gameTime--;
                updateTimer();
                
                if (gameTime <= 0) {
                    endGame();
                }
            }, 1000);
            
            // Start the specific game logic
            startGameLogic();
        }

        function updateScore() {
            document.getElementById('gameScore').textContent = gameScore;
        }

        function updateTimer() {
            document.getElementById('gameTime').textContent = gameTime;
        }

        function endGame() {
            clearInterval(gameTimer);
            gameTimer = null;
            
            totalScore += gameScore;
            localStorage.setItem('partyScore', totalScore.toString());
            document.getElementById('totalScore').textContent = totalScore;
            
            // Show end game message
            const gameContent = document.getElementById('gameContent');
            gameContent.innerHTML = `
                <div class="text-center">
                    <div class="text-6xl mb-4">üéâ</div>
                    <h3 class="text-3xl font-bold text-gray-800 dark:text-white mb-4">Game Over!</h3>
                    <p class="text-xl text-gray-600 dark:text-gray-300 mb-4">You scored ${gameScore} points!</p>
                    <button onclick="showHome()" class="bg-blue-500 hover:bg-blue-600 text-white font-bold py-3 px-6 rounded-lg">
                        Play Another Game
                    </button>
                </div>
            `;
        }

        // Game Logic Functions
        function startGameLogic() {
            switch(currentGame) {
                case 'reaction':
                    startReactionGame();
                    break;
                case 'memory':
                    startMemoryGame();
                    break;
                case 'tap':
                    startTapGame();
                    break;
                case 'color':
                    startColorGame();
                    break;
                case 'pattern':
                    startPatternGame();
                    break;
                case 'balance':
                    startBalanceGame();
                    break;
                case 'whack':
                    startWhackGame();
                    break;
                case 'parkour':
                    startParkourGame();
                    break;
            }
        }

        // Reaction Game
        function setupReactionGame() {
            const gameContent = document.getElementById('gameContent');
            gameContent.innerHTML = `
                <div id="reactionArea" class="w-full h-64 bg-red-500 rounded-2xl flex items-center justify-center text-white text-2xl font-bold cursor-pointer">
                    Wait for green...
                </div>
            `;
        }

        function startReactionGame() {
            const reactionArea = document.getElementById('reactionArea');
            let reactionStartTime = 0;
            let waitingForGreen = false;
            
            function newReactionRound() {
                if (gameTime <= 0) return;
                
                reactionArea.className = 'w-full h-64 bg-red-500 rounded-2xl flex items-center justify-center text-white text-2xl font-bold cursor-pointer';
                reactionArea.textContent = 'Wait for green...';
                waitingForGreen = true;
                
                setTimeout(() => {
                    if (gameTime <= 0) return;
                    reactionArea.className = 'w-full h-64 bg-green-500 rounded-2xl flex items-center justify-center text-white text-2xl font-bold cursor-pointer';
                    reactionArea.textContent = 'CLICK NOW!';
                    reactionStartTime = Date.now();
                    waitingForGreen = false;
                }, Math.random() * 3000 + 1000);
            }
            
            reactionArea.onclick = () => {
                if (waitingForGreen) {
                    reactionArea.className = 'w-full h-64 bg-red-500 rounded-2xl flex items-center justify-center text-white text-2xl font-bold cursor-pointer';
                    reactionArea.textContent = 'Too early! Wait...';
                    return;
                }
                
                if (reactionArea.classList.contains('bg-green-500')) {
                    const reactionTime = Date.now() - reactionStartTime;
                    const points = Math.max(1, Math.round(1000 / reactionTime * 10));
                    gameScore += points;
                    updateScore();
                    
                    reactionArea.className = 'w-full h-64 bg-blue-500 rounded-2xl flex items-center justify-center text-white text-2xl font-bold cursor-pointer';
                    reactionArea.textContent = `+${points} points! (${reactionTime}ms)`;
                    
                    setTimeout(newReactionRound, 1000);
                }
            };
            
            newReactionRound();
        }

        // Memory Game
        let memorySequence = [];
        let playerSequence = [];
        let memoryRound = 0;

        function setupMemoryGame() {
            const gameContent = document.getElementById('gameContent');
            gameContent.innerHTML = `
                <div class="grid grid-cols-2 gap-4 max-w-md mx-auto">
                    <button id="memBtn1" class="memory-btn h-24 bg-red-500 rounded-lg text-white font-bold text-2xl" data-color="1">1</button>
                    <button id="memBtn2" class="memory-btn h-24 bg-blue-500 rounded-lg text-white font-bold text-2xl" data-color="2">2</button>
                    <button id="memBtn3" class="memory-btn h-24 bg-green-500 rounded-lg text-white font-bold text-2xl" data-color="3">3</button>
                    <button id="memBtn4" class="memory-btn h-24 bg-yellow-500 rounded-lg text-white font-bold text-2xl" data-color="4">4</button>
                </div>
                <div id="memoryStatus" class="text-center mt-4 text-xl font-bold">Get ready...</div>
            `;
        }

        function startMemoryGame() {
            memorySequence = [];
            playerSequence = [];
            memoryRound = 0;
            nextMemoryRound();
        }

        function nextMemoryRound() {
            if (gameTime <= 0) return;
            
            memoryRound++;
            memorySequence.push(Math.floor(Math.random() * 4) + 1);
            playerSequence = [];
            
            document.getElementById('memoryStatus').textContent = `Round ${memoryRound}: Watch the sequence`;
            
            // Disable buttons during sequence
            const buttons = document.querySelectorAll('.memory-btn');
            buttons.forEach(btn => btn.disabled = true);
            
            // Play sequence
            playMemorySequence();
        }

        function playMemorySequence() {
            let i = 0;
            const interval = setInterval(() => {
                if (i < memorySequence.length) {
                    flashMemoryButton(memorySequence[i]);
                    i++;
                } else {
                    clearInterval(interval);
                    document.getElementById('memoryStatus').textContent = 'Your turn! Repeat the sequence';
                    
                    // Enable buttons
                    const buttons = document.querySelectorAll('.memory-btn');
                    buttons.forEach(btn => {
                        btn.disabled = false;
                        btn.onclick = (e) => handleMemoryButtonClick(parseInt(e.target.dataset.color));
                    });
                }
            }, 600);
        }

        function flashMemoryButton(buttonNum) {
            const btn = document.getElementById(`memBtn${buttonNum}`);
            btn.style.opacity = '1';
            btn.style.transform = 'scale(1.1)';
            setTimeout(() => {
                btn.style.opacity = '0.7';
                btn.style.transform = 'scale(1)';
            }, 300);
        }

        function handleMemoryButtonClick(buttonNum) {
            playerSequence.push(buttonNum);
            flashMemoryButton(buttonNum);
            
            // Check if correct
            const currentIndex = playerSequence.length - 1;
            if (playerSequence[currentIndex] !== memorySequence[currentIndex]) {
                document.getElementById('memoryStatus').textContent = 'Wrong! Starting over...';
                setTimeout(() => {
                    memorySequence = [];
                    memoryRound = 0;
                    nextMemoryRound();
                }, 1500);
                return;
            }
            
            // Check if sequence complete
            if (playerSequence.length === memorySequence.length) {
                gameScore += memoryRound * 10;
                updateScore();
                document.getElementById('memoryStatus').textContent = `Correct! +${memoryRound * 10} points`;
                setTimeout(nextMemoryRound, 1500);
            }
        }

        // Tap Game
        function setupTapGame() {
            const gameContent = document.getElementById('gameContent');
            gameContent.innerHTML = `
                <div class="text-center">
                    <button id="tapButton" class="w-48 h-48 bg-gradient-to-br from-blue-400 to-blue-600 rounded-full text-white text-4xl font-bold hover:scale-105 transition-transform">
                        TAP ME!
                    </button>
                    <div id="tapCount" class="mt-4 text-3xl font-bold">Taps: 0</div>
                </div>
            `;
        }

        function startTapGame() {
            let tapCount = 0;
            const tapButton = document.getElementById('tapButton');
            const tapCountDisplay = document.getElementById('tapCount');
            
            tapButton.onclick = () => {
                tapCount++;
                gameScore = tapCount;
                updateScore();
                tapCountDisplay.textContent = `Taps: ${tapCount}`;
                
                // Visual feedback
                tapButton.style.transform = 'scale(0.95)';
                setTimeout(() => {
                    tapButton.style.transform = 'scale(1)';
                }, 100);
            };
        }

        // Color Game
        const colors = [
            {name: 'RED', color: 'bg-red-500', textColor: 'text-red-500'},
            {name: 'BLUE', color: 'bg-blue-500', textColor: 'text-blue-500'},
            {name: 'GREEN', color: 'bg-green-500', textColor: 'text-green-500'},
            {name: 'YELLOW', color: 'bg-yellow-500', textColor: 'text-yellow-500'},
            {name: 'PURPLE', color: 'bg-purple-500', textColor: 'text-purple-500'},
            {name: 'ORANGE', color: 'bg-orange-500', textColor: 'text-orange-500'}
        ];

        function setupColorGame() {
            const gameContent = document.getElementById('gameContent');
            gameContent.innerHTML = `
                <div class="text-center">
                    <div id="colorText" class="text-6xl font-bold mb-8">RED</div>
                    <div class="grid grid-cols-2 md:grid-cols-3 gap-4 max-w-lg mx-auto">
                        ${colors.map((color, index) => 
                            `<button class="color-btn h-20 ${color.color} rounded-lg text-white font-bold text-lg" data-color="${color.name}">${color.name}</button>`
                        ).join('')}
                    </div>
                </div>
            `;
        }

        function startColorGame() {
            let currentColorName = '';
            let currentColorClass = '';
            
            function newColorRound() {
                if (gameTime <= 0) return;
                
                const randomColor = colors[Math.floor(Math.random() * colors.length)];
                const randomTextColor = colors[Math.floor(Math.random() * colors.length)];
                
                currentColorName = randomColor.name;
                const colorText = document.getElementById('colorText');
                colorText.textContent = randomTextColor.name;
                colorText.className = `text-6xl font-bold mb-8 ${randomColor.textColor}`;
                
                // Add click handlers to color buttons
                document.querySelectorAll('.color-btn').forEach(btn => {
                    btn.onclick = (e) => {
                        const clickedColor = e.target.dataset.color;
                        if (clickedColor === currentColorName) {
                            gameScore += 10;
                            updateScore();
                            // Visual feedback
                            e.target.style.transform = 'scale(0.9)';
                            setTimeout(() => {
                                e.target.style.transform = 'scale(1)';
                                newColorRound();
                            }, 200);
                        } else {
                            e.target.style.backgroundColor = '#ef4444';
                            setTimeout(() => {
                                e.target.style.backgroundColor = '';
                            }, 200);
                        }
                    };
                });
            }
            
            newColorRound();
        }

        // Pattern Game
        let patternSequence = [];
        let patternPlayerIndex = 0;

        function setupPatternGame() {
            const gameContent = document.getElementById('gameContent');
            gameContent.innerHTML = `
                <div class="text-center">
                    <div id="patternDisplay" class="mb-8 text-2xl font-bold">Watch the pattern...</div>
                    <div class="grid grid-cols-4 gap-2 max-w-md mx-auto">
                        ${Array.from({length: 16}, (_, i) => 
                            `<button id="patBtn${i}" class="pattern-btn h-16 bg-gray-300 rounded-lg" data-index="${i}"></button>`
                        ).join('')}
                    </div>
                </div>
            `;
        }

        function startPatternGame() {
            patternSequence = [];
            patternPlayerIndex = 0;
            generatePattern();
        }

        function generatePattern() {
            if (gameTime <= 0) return;
            
            // Add new button to pattern
            patternSequence.push(Math.floor(Math.random() * 16));
            patternPlayerIndex = 0;
            
            document.getElementById('patternDisplay').textContent = `Pattern ${patternSequence.length}: Watch carefully`;
            
            // Disable all buttons
            document.querySelectorAll('.pattern-btn').forEach(btn => btn.disabled = true);
            
            // Show pattern
            let i = 0;
            const showPattern = setInterval(() => {
                if (i < patternSequence.length) {
                    const btn = document.getElementById(`patBtn${patternSequence[i]}`);
                    btn.style.backgroundColor = '#3b82f6';
                    setTimeout(() => {
                        btn.style.backgroundColor = '#d1d5db';
                    }, 300);
                    i++;
                } else {
                    clearInterval(showPattern);
                    document.getElementById('patternDisplay').textContent = 'Your turn! Click the pattern';
                    
                    // Enable buttons
                    document.querySelectorAll('.pattern-btn').forEach(btn => {
                        btn.disabled = false;
                        btn.onclick = (e) => handlePatternClick(parseInt(e.target.dataset.index));
                    });
                }
            }, 500);
        }

        function handlePatternClick(index) {
            const btn = document.getElementById(`patBtn${index}`);
            btn.style.backgroundColor = '#10b981';
            setTimeout(() => {
                btn.style.backgroundColor = '#d1d5db';
            }, 200);
            
            if (index === patternSequence[patternPlayerIndex]) {
                patternPlayerIndex++;
                if (patternPlayerIndex === patternSequence.length) {
                    gameScore += patternSequence.length * 5;
                    updateScore();
                    document.getElementById('patternDisplay').textContent = `Correct! +${patternSequence.length * 5} points`;
                    setTimeout(generatePattern, 1500);
                }
            } else {
                document.getElementById('patternDisplay').textContent = 'Wrong! Starting over...';
                btn.style.backgroundColor = '#ef4444';
                setTimeout(() => {
                    btn.style.backgroundColor = '#d1d5db';
                    patternSequence = [];
                    generatePattern();
                }, 1500);
            }
        }

        // Balance Game
        let balancePosition = 50;
        let balanceDirection = 0;

        function setupBalanceGame() {
            const gameContent = document.getElementById('gameContent');
            gameContent.innerHTML = `
                <div class="text-center">
                    <div class="mb-8">
                        <div class="relative bg-gray-300 h-8 rounded-full mx-auto max-w-md">
                            <div id="balanceBar" class="absolute top-0 left-1/2 w-4 h-8 bg-blue-500 rounded transform -translate-x-1/2 transition-all duration-100"></div>
                            <div class="absolute top-10 left-1/2 w-2 h-4 bg-green-500 transform -translate-x-1/2"></div>
                        </div>
                    </div>
                    <div class="flex gap-4 justify-center">
                        <button id="leftBtn" class="bg-red-500 hover:bg-red-600 text-white font-bold py-4 px-8 rounded-lg text-xl">‚Üê LEFT</button>
                        <button id="rightBtn" class="bg-blue-500 hover:bg-blue-600 text-white font-bold py-4 px-8 rounded-lg text-xl">RIGHT ‚Üí</button>
                    </div>
                    <div id="balanceScore" class="mt-4 text-xl font-bold">Stay in the green zone!</div>
                </div>
            `;
        }

        function startBalanceGame() {
            balancePosition = 50;
            balanceDirection = (Math.random() - 0.5) * 2;
            
            const leftBtn = document.getElementById('leftBtn');
            const rightBtn = document.getElementById('rightBtn');
            const balanceBar = document.getElementById('balanceBar');
            const balanceScoreDisplay = document.getElementById('balanceScore');
            
            leftBtn.onclick = () => {
                balanceDirection -= 1;
            };
            
            rightBtn.onclick = () => {
                balanceDirection += 1;
            };
            
            // Game loop
            const balanceInterval = setInterval(() => {
                if (gameTime <= 0) {
                    clearInterval(balanceInterval);
                    return;
                }
                
                balancePosition += balanceDirection;
                balanceDirection += (Math.random() - 0.5) * 0.5; // Random drift
                balanceDirection *= 0.98; // Friction
                
                // Boundaries
                if (balancePosition < 0) {
                    balancePosition = 0;
                    balanceDirection = Math.abs(balanceDirection);
                }
                if (balancePosition > 100) {
                    balancePosition = 100;
                    balanceDirection = -Math.abs(balanceDirection);
                }
                
                // Update visual
                balanceBar.style.left = `${balancePosition}%`;
                
                // Score based on how close to center
                const distanceFromCenter = Math.abs(balancePosition - 50);
                if (distanceFromCenter < 10) {
                    gameScore += 2;
                    balanceBar.style.backgroundColor = '#10b981';
                    balanceScoreDisplay.textContent = 'Perfect! +2 points';
                } else if (distanceFromCenter < 20) {
                    gameScore += 1;
                    balanceBar.style.backgroundColor = '#f59e0b';
                    balanceScoreDisplay.textContent = 'Good! +1 point';
                } else {
                    balanceBar.style.backgroundColor = '#ef4444';
                    balanceScoreDisplay.textContent = 'Get back to center!';
                }
                
                updateScore();
            }, 100);
        }

        // Whack-a-Mole Game
        let whackMoles = [];
        let whackInterval = null;

        function setupWhackGame() {
            const gameContent = document.getElementById('gameContent');
            gameContent.innerHTML = `
                <div class="text-center">
                    <div class="grid grid-cols-3 gap-4 max-w-lg mx-auto">
                        ${Array.from({length: 9}, (_, i) => 
                            `<div class="whack-hole relative h-24 w-24 bg-gray-700 rounded-full border-4 border-gray-800 mx-auto cursor-pointer" data-hole="${i}">
                                <div id="mole${i}" class="mole absolute bottom-0 left-1/2 transform -translate-x-1/2 w-16 h-16 bg-amber-600 rounded-full hidden items-center justify-center text-2xl">üêπ</div>
                            </div>`
                        ).join('')}
                    </div>
                    <div id="whackStatus" class="mt-6 text-xl font-bold">Get ready to whack!</div>
                </div>
            `;
        }

        function startWhackGame() {
            whackMoles = [];
            const holes = document.querySelectorAll('.whack-hole');
            
            // Add click handlers to holes
            holes.forEach((hole, index) => {
                hole.onclick = () => whackMole(index);
            });
            
            // Start spawning moles
            whackInterval = setInterval(() => {
                if (gameTime <= 0) {
                    clearInterval(whackInterval);
                    return;
                }
                spawnMole();
            }, 800);
        }

        function spawnMole() {
            // Find empty holes
            const emptyHoles = [];
            for (let i = 0; i < 9; i++) {
                if (!whackMoles[i]) {
                    emptyHoles.push(i);
                }
            }
            
            if (emptyHoles.length === 0) return;
            
            // Spawn mole in random empty hole
            const holeIndex = emptyHoles[Math.floor(Math.random() * emptyHoles.length)];
            const mole = document.getElementById(`mole${holeIndex}`);
            
            whackMoles[holeIndex] = true;
            mole.classList.remove('hidden');
            mole.classList.add('flex');
            
            // Mole disappears after 1.5 seconds
            setTimeout(() => {
                hideMole(holeIndex);
            }, 1500);
        }

        function whackMole(holeIndex) {
            if (whackMoles[holeIndex]) {
                gameScore += 15;
                updateScore();
                
                const mole = document.getElementById(`mole${holeIndex}`);
                mole.style.backgroundColor = '#ef4444';
                mole.textContent = 'üí•';
                
                setTimeout(() => {
                    hideMole(holeIndex);
                }, 200);
                
                document.getElementById('whackStatus').textContent = 'Great hit! +15 points';
            }
        }

        function hideMole(holeIndex) {
            const mole = document.getElementById(`mole${holeIndex}`);
            mole.classList.add('hidden');
            mole.classList.remove('flex');
            mole.style.backgroundColor = '#f59e0b';
            mole.textContent = 'üêπ';
            whackMoles[holeIndex] = false;
        }

        // Parkour Game
        let parkourPlayer = { y: 200, jumping: false, velocity: 0 };
        let parkourObstacles = [];
        let parkourGameLoop = null;
        let parkourDistance = 0;

        function setupParkourGame() {
            const gameContent = document.getElementById('gameContent');
            gameContent.innerHTML = `
                <div class="relative w-full h-80 bg-gradient-to-b from-sky-400 to-green-400 rounded-2xl overflow-hidden">
                    <!-- Ground -->
                    <div class="absolute bottom-0 w-full h-20 bg-green-600"></div>
                    
                    <!-- Player -->
                    <div id="parkourPlayer" class="absolute w-12 h-12 text-3xl flex items-center justify-center" style="left: 50px; bottom: 80px;">üèÉ</div>
                    
                    <!-- Obstacles container -->
                    <div id="obstaclesContainer" class="absolute bottom-20 w-full h-16"></div>
                    
                    <!-- Distance counter -->
                    <div class="absolute top-4 left-4 bg-black/50 text-white px-3 py-1 rounded-lg font-bold">
                        Distance: <span id="parkourDistance">0</span>m
                    </div>
                </div>
                
                <div class="text-center mt-6">
                    <button id="jumpBtn" class="bg-blue-500 hover:bg-blue-600 text-white font-bold py-4 px-12 rounded-2xl text-xl">
                        ü¶ò JUMP
                    </button>
                    <div id="parkourStatus" class="mt-4 text-lg font-bold">Tap JUMP to avoid obstacles!</div>
                </div>
            `;
        }

        function startParkourGame() {
            parkourPlayer = { y: 200, jumping: false, velocity: 0 };
            parkourObstacles = [];
            parkourDistance = 0;
            
            const jumpBtn = document.getElementById('jumpBtn');
            const player = document.getElementById('parkourPlayer');
            const obstaclesContainer = document.getElementById('obstaclesContainer');
            
            jumpBtn.onclick = jump;
            
            // Add keyboard support
            document.addEventListener('keydown', handleKeyDown);
            
            // Start game loop
            parkourGameLoop = setInterval(() => {
                if (gameTime <= 0) {
                    clearInterval(parkourGameLoop);
                    document.removeEventListener('keydown', handleKeyDown);
                    return;
                }
                
                updateParkourGame();
            }, 50);
            
            // Spawn obstacles
            setInterval(() => {
                if (gameTime <= 0) return;
                spawnObstacle();
            }, 2000);
        }

        function handleKeyDown(e) {
            if (e.code === 'Space' || e.key === ' ') {
                e.preventDefault();
                jump();
            }
        }

        function jump() {
            if (!parkourPlayer.jumping) {
                parkourPlayer.jumping = true;
                parkourPlayer.velocity = -15;
            }
        }

        function updateParkourGame() {
            const player = document.getElementById('parkourPlayer');
            const obstaclesContainer = document.getElementById('obstaclesContainer');
            
            // Update player physics
            if (parkourPlayer.jumping) {
                parkourPlayer.velocity += 0.8; // gravity
                parkourPlayer.y += parkourPlayer.velocity;
                
                // Land on ground
                if (parkourPlayer.y >= 200) {
                    parkourPlayer.y = 200;
                    parkourPlayer.jumping = false;
                    parkourPlayer.velocity = 0;
                }
            }
            
            // Update player position
            player.style.bottom = `${320 - parkourPlayer.y}px`;
            
            // Update obstacles
            parkourObstacles.forEach((obstacle, index) => {
                obstacle.x -= 5;
                const obstacleElement = document.getElementById(`obstacle${obstacle.id}`);
                
                if (obstacleElement) {
                    obstacleElement.style.left = `${obstacle.x}px`;
                    
                    // Check collision
                    if (obstacle.x < 90 && obstacle.x > 30 && parkourPlayer.y > 160) {
                        // Hit obstacle - end game early
                        gameTime = 0;
                        document.getElementById('parkourStatus').textContent = 'You hit an obstacle! Game Over!';
                        return;
                    }
                    
                    // Remove obstacle when off screen
                    if (obstacle.x < -50) {
                        obstacleElement.remove();
                        parkourObstacles.splice(index, 1);
                        gameScore += 10;
                        updateScore();
                    }
                }
            });
            
            // Update distance
            parkourDistance += 0.1;
            document.getElementById('parkourDistance').textContent = Math.floor(parkourDistance);
            gameScore = Math.floor(parkourDistance) + (parkourObstacles.length * 5);
            updateScore();
        }

        function spawnObstacle() {
            const obstacleId = Date.now();
            const obstacle = {
                id: obstacleId,
                x: 800,
                y: 200
            };
            
            parkourObstacles.push(obstacle);
            
            const obstacleElement = document.createElement('div');
            obstacleElement.id = `obstacle${obstacleId}`;
            obstacleElement.className = 'absolute w-8 h-16 bg-red-600 rounded-lg';
            obstacleElement.style.left = `${obstacle.x}px`;
            obstacleElement.style.bottom = '0px';
            obstacleElement.textContent = 'üöß';
            obstacleElement.style.display = 'flex';
            obstacleElement.style.alignItems = 'center';
            obstacleElement.style.justifyContent = 'center';
            obstacleElement.style.fontSize = '20px';
            
            document.getElementById('obstaclesContainer').appendChild(obstacleElement);
        }
    </script>


</body></html>
